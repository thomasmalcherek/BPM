<?xml version="1.0" encoding="UTF-8"?>
<bpws:process exitOnStandardFault="no" name="DataToBWStartEvent"
    suppressJoinFailure="yes" tibex:bxVersion="1.15.0"
    tibex:explicitCompensation="yes" tibex:serviceProcess="yes"
    tibex:xpdlId="_0KkFMPiaEeiLOcx5GuQ9ow"
    xmlns:bpws="http://docs.oasis-open.org/wsbpel/2.0/process/executable"
    xmlns:ecore="http://www.eclipse.org/emf/2002/Ecore"
    xmlns:ns="http://www.tibco.com/bs3.0/_GFiEUOmlEeiNa-ssr_CQIw"
    xmlns:ns0="http://www.tibco.com/bs3.0/_GFiEUOmlEeiNa-ssr_CQIw"
    xmlns:tibex="http://www.tibco.com/bpel/2007/extensions"
    xmlns:tns1="http://example.com/comtibcopoctest"
    xmlns:ttns="http://example.com/comtibcopoctest"
    xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <tibex:VariableDescriptor type="PersistentBatching">
        <task name="GenerateUUID">
            <startingVariables>
                <variable>Input_MetaData</variable>
                <variable>WF_CASE_ID</variable>
            </startingVariables>
        </task>
        <task name="_BX_SPInput_CallDataToBW">
            <startingVariables>
                <variable>Input_MetaData</variable>
                <variable>WF_CASE_ID</variable>
            </startingVariables>
        </task>
    </tibex:VariableDescriptor>
    <bpws:documentation>*** Generated by TIBCO Business Studio.</bpws:documentation>
    <bpws:import importType="http://schemas.xmlsoap.org/wsdl/"
        location="com.tibco.poc.test.wsdl" namespace="http://www.tibco.com/bs3.0/_GFiEUOmlEeiNa-ssr_CQIw"/>
    <bpws:partnerLinks>
        <bpws:partnerLink name="DataToBWStartEvent"
            partnerLinkType="ns0:DataToBWStartEvent_PLT" partnerRole="DataToBWStartEventProvider"/>
    </bpws:partnerLinks>
    <bpws:variables>
        <bpws:variable name="Input_MetaData"
            tibex:class="com.example.comtibcopoctest.pocMetaData"
            tibex:parameter="in" tibex:xpdlId="_Kt_14fibEeiLOcx5GuQ9ow"/>
        <bpws:variable name="WF_CASE_ID"
            tibex:xpdlId="_AZLXIfibEeiLOcx5GuQ9ow" type="xsd:string"/>
    </bpws:variables>
    <bpws:extensions>
        <bpws:extension mustUnderstand="yes" namespace="http://www.tibco.com/bpel/2007/extensions"/>
    </bpws:extensions>
    <bpws:eventHandlers/>
    <bpws:flow name="_BX_flow_RXWdkPidEeiLOcx5GuQ9ow">
        <bpws:links>
            <bpws:link name="CallDataToBW to End" tibex:xpdlId="_0MIyhviaEeiLOcx5GuQ9ow"/>
            <bpws:link name="CatchMessageEvent to GenerateUUID" tibex:xpdlId="_Gk4EYPibEeiLOcx5GuQ9ow"/>
            <bpws:link name="GenerateUUID to CallDataToBW" tibex:xpdlId="_G262oPibEeiLOcx5GuQ9ow"/>
        </bpws:links>
        <bpws:empty name="End" tibex:migrationAllowed="yes"
            tibex:type="endEvent" tibex:xpdlId="_0MIyg_iaEeiLOcx5GuQ9ow">
            <bpws:targets>
                <bpws:target linkName="CallDataToBW to End"/>
            </bpws:targets>
        </bpws:empty>
        <bpws:scope name="CallDataToBW" tibex:migrationAllowed="yes"
            tibex:type="reusableSubProcess" tibex:xpdlId="_0MIyhfiaEeiLOcx5GuQ9ow">
            <bpws:targets>
                <bpws:target linkName="GenerateUUID to CallDataToBW"/>
            </bpws:targets>
            <bpws:sources>
                <bpws:source linkName="CallDataToBW to End"/>
            </bpws:sources>
            <bpws:variables>
                <bpws:variable name="_BX_MetaData_GetData" tibex:class="com.example.comtibcopoctest.pocMetaData"/>
                <bpws:variable name="_BX_WF_CASE_ID" type="xsd:string"/>
            </bpws:variables>
            <bpws:sequence name="_BX_sequence">
                <bpws:extensionActivity>
                    <tibex:extActivity name="_BX_SPInput_CallDataToBW" xmlns:tibex="http://www.tibco.com/bpel/2007/extensions">
                        <tibex:script expressionLanguage="urn:tibco:wsbpel:2.0:sublang:javascript"><![CDATA[// Map from 'Input_MetaData' to 'MetaData_GetData'
_BX_MetaData_GetData = ScriptUtil.copy(Input_MetaData);

// Map from 'WF_CASE_ID' to 'WF_CASE_ID'
_BX_WF_CASE_ID = WF_CASE_ID;


]]></tibex:script>
                    </tibex:extActivity>
                </bpws:extensionActivity>
                <bpws:extensionActivity>
                    <tibex:extActivity name="CallDataToBW" xmlns:tibex="http://www.tibco.com/bpel/2007/extensions">
                        <tibex:callProcess asynch="yes" attached="no" subProcessId="_GF0_QOmlEeiNa-ssr_CQIw">
                            <tibex:subProcessInput>
                                <tibex:mapping
                                    field="_BX_MetaData_GetData" formalParameter="MetaData_GetData"/>
                                <tibex:mapping field="_BX_WF_CASE_ID" formalParameter="WF_CASE_ID"/>
                            </tibex:subProcessInput>
                        </tibex:callProcess>
                    </tibex:extActivity>
                </bpws:extensionActivity>
            </bpws:sequence>
        </bpws:scope>
        <bpws:scope name="CatchMessageEvent"
            tibex:type="messageStartEvent" tibex:xpdlId="_5S5Q8PiaEeiLOcx5GuQ9ow">
            <bpws:sources>
                <bpws:source linkName="CatchMessageEvent to GenerateUUID"/>
            </bpws:sources>
            <bpws:variables>
                <bpws:variable
                    messageType="ns0:DataToBWStartEvent_CatchMessageEvent_INPUT" name="v_37ba1dec"/>
                <bpws:variable
                    messageType="ns0:DataToBWStartEvent_CatchMessageEvent_OUTPUT" name="v_ca2b16ff"/>
            </bpws:variables>
            <bpws:sequence name="_BX_sequence_2">
                <bpws:receive createInstance="yes" name="_BX_receive"
                    operation="CatchMessageEvent"
                    partnerLink="DataToBWStartEvent"
                    portType="ns0:DataToBWStartEvent" variable="v_37ba1dec">
                    <tibex:replyImmediate variable="v_ca2b16ff">
                        <bpws:copy>
                            <bpws:from variable="__PROCESS_ID__"/>
                            <bpws:to part="ProcessId" variable="v_ca2b16ff"/>
                        </bpws:copy>
                    </tibex:replyImmediate>
                </bpws:receive>
                <bpws:assign name="_BX_assign" validate="no">
                    <bpws:copy tibex:objectName="pocMetaData"
                        tibex:objectNamespace="http://example.com/comtibcopoctest" tibex:transform="XmlToObject">
                        <bpws:from part="Input_MetaData" variable="v_37ba1dec"/>
                        <bpws:to variable="Input_MetaData"/>
                    </bpws:copy>
                </bpws:assign>
            </bpws:sequence>
        </bpws:scope>
        <bpws:extensionActivity>
            <tibex:extActivity name="GenerateUUID"
                tibex:migrationAllowed="yes" tibex:type="scriptTask"
                tibex:xpdlId="_FuCjAvibEeiLOcx5GuQ9ow" xmlns:tibex="http://www.tibco.com/bpel/2007/extensions">
                <bpws:targets>
                    <bpws:target linkName="CatchMessageEvent to GenerateUUID"/>
                </bpws:targets>
                <bpws:sources>
                    <bpws:source linkName="GenerateUUID to CallDataToBW"/>
                </bpws:sources>
                <tibex:script expressionLanguage="urn:tibco:wsbpel:2.0:sublang:javascript"><![CDATA[Input_MetaData.WFCaseID=Math.random().toString().slice(2);
WF_CASE_ID=Input_MetaData.WFCaseID;
]]></tibex:script>
            </tibex:extActivity>
        </bpws:extensionActivity>
    </bpws:flow>
</bpws:process>
