<?xml version="1.0" encoding="UTF-8"?>
<bpws:process exitOnStandardFault="no"
    name="SubProcess_RecieveDataFromExtern" suppressJoinFailure="yes"
    tibex:bxVersion="1.15.0" tibex:explicitCompensation="yes"
    tibex:xpdlId="_ayfuAPIpEeiCsd_Wv-RtYQ"
    xmlns:bpws="http://docs.oasis-open.org/wsbpel/2.0/process/executable"
    xmlns:ns="http://www.tibco.com/bs3.0/_GFiEUOmlEeiNa-ssr_CQIw"
    xmlns:ns0="http://www.tibco.com/bs3.0/_GFiEUOmlEeiNa-ssr_CQIw"
    xmlns:tibex="http://www.tibco.com/bpel/2007/extensions"
    xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <tibex:VariableDescriptor type="PersistentBatching">
        <task name="_BX_assign_2">
            <startingVariables>
                <variable>ParameterOut_WF_CASE_ID</variable>
            </startingVariables>
        </task>
        <task name="setParameterOut_WF_CASE_ID">
            <startingVariables>
                <variable>ParameterOut_WF_CASE_ID</variable>
                <variable>ParameterIn_CorrelationID</variable>
            </startingVariables>
        </task>
        <task name="setWF_CASE_ID">
            <startingVariables>
                <variable>WF_CASE_ID</variable>
                <variable>ParameterIn_CorrelationID</variable>
            </startingVariables>
        </task>
        <task name="Escalation_after_3_minutes">
            <startingVariables>
                <variable>SubProcessMetaData</variable>
            </startingVariables>
        </task>
        <task name="_BX_SPInput_SubProcess_GetDataFromDB">
            <startingVariables>
                <variable>WF_CASE_ID</variable>
            </startingVariables>
        </task>
        <task name="_BX_SPOutput_SubProcess_GetDataFromDB">
            <startingVariables>
                <variable>SubProcessMetaData</variable>
            </startingVariables>
        </task>
    </tibex:VariableDescriptor>
    <bpws:documentation>*** Generated by TIBCO Business Studio.</bpws:documentation>
    <bpws:import importType="http://schemas.xmlsoap.org/wsdl/"
        location="com.tibco.poc.test.wsdl" namespace="http://www.tibco.com/bs3.0/_GFiEUOmlEeiNa-ssr_CQIw"/>
    <bpws:partnerLinks>
        <bpws:partnerLink name="DataToBW"
            partnerLinkType="ns0:SubProcess_RecieveDataFromExtern_PLT" partnerRole="SubProcess_RecieveDataFromExternProvider"/>
    </bpws:partnerLinks>
    <bpws:variables>
        <bpws:variable name="ParameterIn_CorrelationID"
            tibex:parameter="in" tibex:xpdlId="_cvNSU_IpEeiCsd_Wv-RtYQ" type="xsd:string"/>
        <bpws:variable name="ParameterOut_WF_CASE_ID"
            tibex:parameter="out" tibex:xpdlId="_cvxBEPIrEeiCsd_Wv-RtYQ" type="xsd:string"/>
        <bpws:variable name="SubProcessMetaData"
            tibex:class="com.example.comtibcopoctest.pocMetaData"
            tibex:parameter="in" tibex:xpdlId="_9ZThQPI6EeiCsd_Wv-RtYQ"/>
        <bpws:variable name="WF_CASE_ID"
            tibex:xpdlId="_cvNSVPIpEeiCsd_Wv-RtYQ" type="xsd:string"/>
        <bpws:variable name="_BX_fanVariable" type="xsd:int">
            <bpws:from>
                <bpws:literal><![CDATA[0]]></bpws:literal>
            </bpws:from>
        </bpws:variable>
    </bpws:variables>
    <bpws:correlationSets tibex:useVariables="yes">
        <bpws:correlationSet name="WF_CASE_ID" properties="ns0:SubProcess_RecieveDataFromExtern_WF_CASE_ID"/>
    </bpws:correlationSets>
    <bpws:extensions>
        <bpws:extension mustUnderstand="yes" namespace="http://www.tibco.com/bpel/2007/extensions"/>
    </bpws:extensions>
    <bpws:eventHandlers/>
    <bpws:flow name="_BX_flow_wflXUPiREeiLOcx5GuQ9ow">
        <bpws:links>
            <bpws:link name="Escalation_after_3_minutes to EndEvent" tibex:xpdlId="_3I6hQPI6EeiCsd_Wv-RtYQ"/>
            <bpws:link
                name="setParameterOut_WF_CASE_ID to ReplyToReceiveTask" tibex:xpdlId="_1W_ZAPIsEeiCsd_Wv-RtYQ"/>
            <bpws:link name="StartEvent to setWF_CASE_ID" tibex:xpdlId="_zssVMPI-EeiCsd_Wv-RtYQ"/>
            <bpws:link
                name="_BX_normalFlow to setParameterOut_WF_CASE_ID" tibex:xpdlId="_9A9AwPI8EeiCsd_Wv-RtYQ"/>
            <bpws:link
                name="_BX_scope_ReceiveTask to SubProcess_GetDataFromDB" tibex:xpdlId="_qNi3API6EeiCsd_Wv-RtYQ"/>
            <bpws:link
                name="SubProcess_GetDataFromDB to Escalation_after_3_minutes" tibex:xpdlId="_24DawPI6EeiCsd_Wv-RtYQ"/>
            <bpws:link name="setWF_CASE_ID to _BX_scope_ReceiveTask" tibex:xpdlId="_eiOIEPIpEeiCsd_Wv-RtYQ"/>
            <bpws:link name="ReceiveTask to _BX_normalFlow"/>
        </bpws:links>
        <bpws:extensionActivity>
            <tibex:receiveEvent createInstance="yes" eventTimeout="0"
                name="StartEvent" tibex:type="startEvent"
                tibex:xpdlId="_ayu-lfIpEeiCsd_Wv-RtYQ" xmlns:tibex="http://www.tibco.com/bpel/2007/extensions">
                <bpws:sources>
                    <bpws:source linkName="StartEvent to setWF_CASE_ID"/>
                </bpws:sources>
                <tibex:parameters>
                    <parameterDescription mode="In" name="SubProcessMetaData"/>
                    <parameterDescription mandatory="yes" mode="Out" name="ParameterOut_WF_CASE_ID"/>
                    <parameterDescription mandatory="yes" mode="In" name="ParameterIn_CorrelationID"/>
                </tibex:parameters>
                <tibex:eventSource>
                    <tibex:startEvent eventType="Default"/>
                </tibex:eventSource>
            </tibex:receiveEvent>
        </bpws:extensionActivity>
        <bpws:empty name="EndEvent" tibex:migrationAllowed="yes"
            tibex:type="endEvent" tibex:xpdlId="_SxztsPIsEeiCsd_Wv-RtYQ">
            <bpws:targets>
                <bpws:target linkName="Escalation_after_3_minutes to EndEvent"/>
            </bpws:targets>
        </bpws:empty>
        <bpws:scope name="ReplyToReceiveTask"
            tibex:migrationAllowed="yes" tibex:type="messageEndEvent" tibex:xpdlId="_0ND8gPIsEeiCsd_Wv-RtYQ">
            <bpws:targets>
                <bpws:target linkName="setParameterOut_WF_CASE_ID to ReplyToReceiveTask"/>
            </bpws:targets>
            <bpws:variables>
                <bpws:variable
                    messageType="ns0:SubProcess_RecieveDataFromExtern_ReceiveTask_OUTPUT" name="v_fdafa138"/>
            </bpws:variables>
            <bpws:sequence name="_BX_sequence_2">
                <bpws:assign name="_BX_assign_2" validate="no">
                    <bpws:copy>
                        <bpws:from expressionLanguage="urn:tibco:wsbpel:2.0:sublang:javascript"><![CDATA[ParameterOut_WF_CASE_ID]]></bpws:from>
                        <bpws:to part="ParameterOut_WF_CASE_ID" variable="v_fdafa138"/>
                    </bpws:copy>
                </bpws:assign>
                <bpws:reply name="_BX_reply" operation="ReceiveTask"
                    partnerLink="DataToBW"
                    portType="ns0:SubProcess_RecieveDataFromExtern" variable="v_fdafa138"/>
            </bpws:sequence>
        </bpws:scope>
        <bpws:scope name="SubProcess_GetDataFromDB"
            tibex:migrationAllowed="yes" tibex:type="reusableSubProcess" tibex:xpdlId="_pU5XwvI6EeiCsd_Wv-RtYQ">
            <bpws:targets>
                <bpws:target linkName="_BX_scope_ReceiveTask to SubProcess_GetDataFromDB"/>
            </bpws:targets>
            <bpws:sources>
                <bpws:source linkName="SubProcess_GetDataFromDB to Escalation_after_3_minutes"/>
            </bpws:sources>
            <bpws:variables>
                <bpws:variable name="_BX_SubProcessMetaData" tibex:class="com.example.comtibcopoctest.pocMetaData"/>
                <bpws:variable name="_BX_WfCaseID" type="xsd:string"/>
            </bpws:variables>
            <bpws:sequence name="_BX_sequence_3">
                <bpws:extensionActivity>
                    <tibex:extActivity
                        name="_BX_SPInput_SubProcess_GetDataFromDB" xmlns:tibex="http://www.tibco.com/bpel/2007/extensions">
                        <tibex:script expressionLanguage="urn:tibco:wsbpel:2.0:sublang:javascript"><![CDATA[// Map from 'WF_CASE_ID' to 'WfCaseID'
_BX_WfCaseID = WF_CASE_ID;


]]></tibex:script>
                    </tibex:extActivity>
                </bpws:extensionActivity>
                <bpws:extensionActivity>
                    <tibex:extActivity name="SubProcess_GetDataFromDB" xmlns:tibex="http://www.tibco.com/bpel/2007/extensions">
                        <tibex:callProcess followParentLifecycle="yes"
                            priority="inline" subProcessId="_PtCgMOwNEeieuqYotrFSPg">
                            <tibex:subProcessInput>
                                <tibex:mapping field="_BX_WfCaseID" formalParameter="WfCaseID"/>
                            </tibex:subProcessInput>
                            <tibex:subProcessOutput>
                                <tibex:mapping
                                    field="_BX_SubProcessMetaData" formalParameter="SubProcessMetaData"/>
                            </tibex:subProcessOutput>
                        </tibex:callProcess>
                    </tibex:extActivity>
                </bpws:extensionActivity>
                <bpws:extensionActivity>
                    <tibex:extActivity
                        name="_BX_SPOutput_SubProcess_GetDataFromDB" xmlns:tibex="http://www.tibco.com/bpel/2007/extensions">
                        <tibex:script expressionLanguage="urn:tibco:wsbpel:2.0:sublang:javascript"><![CDATA[// Map from 'SubProcessMetaData' to 'SubProcessMetaData'
SubProcessMetaData = ScriptUtil.copy(_BX_SubProcessMetaData);


]]></tibex:script>
                    </tibex:extActivity>
                </bpws:extensionActivity>
            </bpws:sequence>
        </bpws:scope>
        <bpws:extensionActivity>
            <tibex:extActivity name="Escalation_after_3_minutes"
                tibex:migrationAllowed="yes" tibex:type="userTask"
                tibex:xpdlId="_1Yo2dPI6EeiCsd_Wv-RtYQ" xmlns:tibex="http://www.tibco.com/bpel/2007/extensions">
                <bpws:targets>
                    <bpws:target linkName="SubProcess_GetDataFromDB to Escalation_after_3_minutes"/>
                </bpws:targets>
                <bpws:sources>
                    <bpws:source linkName="Escalation_after_3_minutes to EndEvent"/>
                </bpws:sources>
                <model:UserTaskDataModelType
                    distributionStrategy="OFFER" userTaskPriority="50"
                    workModelID="WM__1Yo2dPI6EeiCsd_Wv-RtYQ"
                    workModelVersionRange="[1.0.0.qualifier,1.0.0.qualifier]"
                    xmi:version="2.0"
                    xmlns:model="http://model.ut.n2.tibco.com" xmlns:xmi="http://www.omg.org/XMI">
                    <userTaskParticipants>
                        <userTaskParticipant
                            entity="ORGANIZATIONAL_UNIT"
                            modelVersion="1" uniqueId="_ILJtEOjhEeietP_QQ0irBw"/>
                    </userTaskParticipants>
                    <userTaskParameters>
                        <userTaskParameter mandatory="false" mode="IN" name="SubProcessMetaData"/>
                    </userTaskParameters>
                    <userTaskGroupMemberships/>
                </model:UserTaskDataModelType>
            </tibex:extActivity>
        </bpws:extensionActivity>
        <bpws:extensionActivity>
            <tibex:extActivity name="setParameterOut_WF_CASE_ID"
                tibex:migrationAllowed="yes" tibex:type="scriptTask"
                tibex:xpdlId="_9A8ZsPI8EeiCsd_Wv-RtYQ" xmlns:tibex="http://www.tibco.com/bpel/2007/extensions">
                <bpws:targets>
                    <bpws:target linkName="_BX_normalFlow to setParameterOut_WF_CASE_ID"/>
                </bpws:targets>
                <bpws:sources>
                    <bpws:source linkName="setParameterOut_WF_CASE_ID to ReplyToReceiveTask"/>
                </bpws:sources>
                <tibex:script expressionLanguage="urn:tibco:wsbpel:2.0:sublang:javascript"><![CDATA[ParameterOut_WF_CASE_ID=ParameterIn_CorrelationID;
]]></tibex:script>
            </tibex:extActivity>
        </bpws:extensionActivity>
        <bpws:extensionActivity>
            <tibex:extActivity name="setWF_CASE_ID"
                tibex:migrationAllowed="yes" tibex:type="scriptTask"
                tibex:xpdlId="_zsruIPI-EeiCsd_Wv-RtYQ" xmlns:tibex="http://www.tibco.com/bpel/2007/extensions">
                <bpws:targets>
                    <bpws:target linkName="StartEvent to setWF_CASE_ID"/>
                </bpws:targets>
                <bpws:sources>
                    <bpws:source linkName="setWF_CASE_ID to _BX_scope_ReceiveTask"/>
                </bpws:sources>
                <tibex:script expressionLanguage="urn:tibco:wsbpel:2.0:sublang:javascript"><![CDATA[WF_CASE_ID=ParameterIn_CorrelationID;]]></tibex:script>
            </tibex:extActivity>
        </bpws:extensionActivity>
        <bpws:scope name="_BX_scope_ReceiveTask" tibex:migrationAllowed="yes">
            <bpws:targets>
                <bpws:target linkName="setWF_CASE_ID to _BX_scope_ReceiveTask"/>
            </bpws:targets>
            <bpws:sources>
                <bpws:source linkName="_BX_scope_ReceiveTask to SubProcess_GetDataFromDB">
                    <bpws:transitionCondition><![CDATA[$_BX_fanVariable=1]]></bpws:transitionCondition>
                </bpws:source>
            </bpws:sources>
            <bpws:eventHandlers>
                <bpws:onAlarm tibex:cancel="yes" tibex:deadline="yes">
                    <bpws:for expressionLanguage="urn:tibco:wsbpel:2.0:sublang:javascript"><![CDATA["PT3M"]]></bpws:for>
                    <bpws:scope name="_BX_scope__cvNSUvIpEeiCsd_Wv-RtYQ">
                        <bpws:assign name="Timeout_Extern"
                            tibex:type="boundaryTimerEvent"
                            tibex:xpdlId="_cvNSUvIpEeiCsd_Wv-RtYQ" validate="no">
                            <bpws:copy>
                                <bpws:from><![CDATA[1]]></bpws:from>
                                <bpws:to variable="_BX_fanVariable"/>
                            </bpws:copy>
                        </bpws:assign>
                    </bpws:scope>
                </bpws:onAlarm>
            </bpws:eventHandlers>
            <bpws:scope name="ReceiveTask" tibex:type="receiveTask" tibex:xpdlId="_cvNSUPIpEeiCsd_Wv-RtYQ">
                <bpws:targets/>
                <bpws:sources>
                    <bpws:source linkName="ReceiveTask to _BX_normalFlow">
                        <bpws:transitionCondition expressionLanguage="urn:tibco:wsbpel:2.0:sublang:javascript"><![CDATA[_BX_fanVariable=0; true]]></bpws:transitionCondition>
                    </bpws:source>
                </bpws:sources>
                <bpws:variables>
                    <bpws:variable
                        messageType="ns0:SubProcess_RecieveDataFromExtern_ReceiveTask_INPUT" name="v_e6cee893"/>
                </bpws:variables>
                <bpws:sequence name="_BX_sequence">
                    <bpws:receive createInstance="no" name="_BX_receive"
                        operation="ReceiveTask" partnerLink="DataToBW"
                        portType="ns0:SubProcess_RecieveDataFromExtern" variable="v_e6cee893">
                        <bpws:correlations>
                            <bpws:correlation initiate="no" set="WF_CASE_ID"/>
                        </bpws:correlations>
                    </bpws:receive>
                    <bpws:assign name="_BX_assign" validate="no">
                        <bpws:copy>
                            <bpws:from part="ParameterIn_CorrelationID" variable="v_e6cee893"/>
                            <bpws:to variable="ParameterIn_CorrelationID"/>
                        </bpws:copy>
                    </bpws:assign>
                </bpws:sequence>
            </bpws:scope>
        </bpws:scope>
        <bpws:empty name="_BX_normalFlow">
            <bpws:targets>
                <bpws:target linkName="ReceiveTask to _BX_normalFlow"/>
            </bpws:targets>
            <bpws:sources>
                <bpws:source linkName="_BX_normalFlow to setParameterOut_WF_CASE_ID"/>
            </bpws:sources>
        </bpws:empty>
    </bpws:flow>
</bpws:process>
