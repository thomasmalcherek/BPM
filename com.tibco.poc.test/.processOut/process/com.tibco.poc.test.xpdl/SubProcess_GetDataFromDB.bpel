<?xml version="1.0" encoding="UTF-8"?>
<bpws:process exitOnStandardFault="no" name="SubProcess_GetDataFromDB"
    suppressJoinFailure="yes" tibex:bxVersion="1.15.0"
    tibex:explicitCompensation="yes"
    tibex:xpdlId="_PtCgMOwNEeieuqYotrFSPg"
    xmlns:bpws="http://docs.oasis-open.org/wsbpel/2.0/process/executable"
    xmlns:jms="http://www.tibco.com/namespaces/ws/2004/soap/binding/JMS"
    xmlns:ns="http://com.tibco.poc.test.bw.saveDataCase"
    xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/"
    xmlns:tibex="http://www.tibco.com/bpel/2007/extensions"
    xmlns:tns="http://com.tibco.poc.test.bw.saveDataCase"
    xmlns:tns0="http://com.tibco.poc.test.bw.saveDataCaseXSD"
    xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <tibex:VariableDescriptor type="PersistentBatching">
        <task name="_BX_sequence_2">
            <startingVariables>
                <variable>WfCaseID</variable>
            </startingVariables>
        </task>
    </tibex:VariableDescriptor>
    <bpws:documentation>*** Generated by TIBCO Business Studio.</bpws:documentation>
    <bpws:import importType="http://schemas.xmlsoap.org/wsdl/"
        location="saveDataCase_JMS.wsdl" namespace="http://com.tibco.poc.test.bw.saveDataCase"/>
    <bpws:partnerLinks>
        <bpws:partnerLink name="SendDataToBW"
            partnerLinkType="ns:saveDataCase_PLT" partnerRole="saveDataCaseProvider"/>
    </bpws:partnerLinks>
    <bpws:variables>
        <bpws:variable name="WfCaseID" tibex:parameter="in"
            tibex:xpdlId="_oX-i8eycEeieuqYotrFSPg" type="xsd:string"/>
        <bpws:variable name="SubProcessMetaData"
            tibex:class="com.example.comtibcopoctest.pocMetaData"
            tibex:parameter="out" tibex:xpdlId="_qp9zseycEeieuqYotrFSPg"/>
    </bpws:variables>
    <bpws:extensions>
        <bpws:extension mustUnderstand="yes" namespace="http://www.tibco.com/bpel/2007/extensions"/>
    </bpws:extensions>
    <bpws:eventHandlers/>
    <bpws:flow name="_BX_flow_4MI1MPx0EeiF0cp9x5MzdA">
        <bpws:links>
            <bpws:link name="ServiceTask to EndEvent" tibex:xpdlId="_gUDSQPJOEeif9tfFlBJi7Q"/>
            <bpws:link name="StartEvent to ServiceTask" tibex:xpdlId="_3cPzYOycEeieuqYotrFSPg"/>
        </bpws:links>
        <bpws:extensionActivity>
            <tibex:receiveEvent createInstance="yes" eventTimeout="0"
                name="StartEvent" tibex:type="startEvent"
                tibex:xpdlId="_PthoZOwNEeieuqYotrFSPg" xmlns:tibex="http://www.tibco.com/bpel/2007/extensions">
                <bpws:sources>
                    <bpws:source linkName="StartEvent to ServiceTask"/>
                </bpws:sources>
                <tibex:parameters>
                    <parameterDescription mandatory="yes" mode="In" name="WfCaseID"/>
                    <parameterDescription mode="Out" name="SubProcessMetaData"/>
                </tibex:parameters>
                <tibex:eventSource>
                    <tibex:startEvent eventType="Default"/>
                </tibex:eventSource>
            </tibex:receiveEvent>
        </bpws:extensionActivity>
        <bpws:empty name="EndEvent" tibex:migrationAllowed="yes"
            tibex:type="endEvent" tibex:xpdlId="_PthoZewNEeieuqYotrFSPg">
            <bpws:targets>
                <bpws:target linkName="ServiceTask to EndEvent"/>
            </bpws:targets>
        </bpws:empty>
        <bpws:scope name="ServiceTask" tibex:migrationAllowed="yes"
            tibex:type="serviceTask" tibex:xpdlId="_Eq7oMOwOEeieuqYotrFSPg">
            <bpws:targets>
                <bpws:target linkName="StartEvent to ServiceTask"/>
            </bpws:targets>
            <bpws:sources>
                <bpws:source linkName="ServiceTask to EndEvent"/>
            </bpws:sources>
            <bpws:variables>
                <bpws:variable messageType="ns:GetDataRequest" name="v_87229a6f"/>
                <bpws:variable messageType="ns:GetDataResponse" name="v_60586861"/>
            </bpws:variables>
            <bpws:sequence name="_BX_sequence">
                <bpws:scope name="_BX_ToSvcDataMapping">
                    <bpws:variables>
                        <bpws:variable
                            name="MESSAGE_GetDataPInputParameters" tibex:class="saveDataCaseXSD.bw.test.poc.tibco.com.GetDataRequestFromCaseIDType"/>
                    </bpws:variables>
                    <bpws:sequence name="_BX_sequence_2">
                        <bpws:extensionActivity>
                            <tibex:extActivity
                                name="_BX_DataMapperScript" xmlns:tibex="http://www.tibco.com/bpel/2007/extensions">
                                <tibex:script expressionLanguage="urn:tibco:wsbpel:2.0:sublang:javascript"><![CDATA[// Create target 'GetDataPInputParameters' if it doesn't exist.
if (MESSAGE_GetDataPInputParameters == null) {
    MESSAGE_GetDataPInputParameters = saveDataCaseXSD_bw_test_poc_tibco_com_Factory.createGetDataRequestFromCaseIDType();
}

// Map from 'WfCaseID' to 'GetDataPInputParameters.caseID'
MESSAGE_GetDataPInputParameters.caseID = WfCaseID;


]]></tibex:script>
                            </tibex:extActivity>
                        </bpws:extensionActivity>
                        <bpws:assign name="_BX_assign" validate="no">
                            <bpws:copy
                                tibex:elementName="{http://com.tibco.poc.test.bw.saveDataCaseXSD}GetDataRequestFromCaseID" tibex:transform="ObjectToXml">
                                <bpws:from expressionLanguage="urn:tibco:wsbpel:2.0:sublang:javascript"><![CDATA[MESSAGE_GetDataPInputParameters]]></bpws:from>
                                <bpws:to part="GetDataPInputParameters" variable="v_87229a6f"/>
                            </bpws:copy>
                        </bpws:assign>
                    </bpws:sequence>
                </bpws:scope>
                <bpws:invoke inputVariable="v_87229a6f"
                    name="_BX_invoke" operation="GetData"
                    outputVariable="v_60586861"
                    partnerLink="SendDataToBW" portType="ns:saveDataCase"/>
                <bpws:scope name="_BX_FromSvcDataMapping">
                    <bpws:variables>
                        <bpws:variable
                            name="MESSAGE_GetDataOutputParameters" tibex:class="saveDataCaseXSD.bw.test.poc.tibco.com.GetDataResponseFromCaseIDType"/>
                    </bpws:variables>
                    <bpws:sequence name="_BX_sequence_3">
                        <bpws:assign name="_BX_assign_2" validate="no">
                            <bpws:copy
                                tibex:objectNamespace="http://com.tibco.poc.test.bw.saveDataCaseXSD" tibex:transform="XmlToObject">
                                <bpws:from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0"><![CDATA[$v_60586861.GetDataOutputParameters]]></bpws:from>
                                <bpws:to variable="MESSAGE_GetDataOutputParameters"/>
                            </bpws:copy>
                        </bpws:assign>
                        <bpws:extensionActivity>
                            <tibex:extActivity
                                name="_BX_DataMapperScript_2" xmlns:tibex="http://www.tibco.com/bpel/2007/extensions">
                                <tibex:script expressionLanguage="urn:tibco:wsbpel:2.0:sublang:javascript"><![CDATA[// Create target 'SubProcessMetaData' if it doesn't exist.
if (SubProcessMetaData == null) {
    SubProcessMetaData = com_example_comtibcopoctest_Factory.createpocMetaData();
}

// Map from 'GetDataOutputParameters.AHVNummer' to 'SubProcessMetaData.AHVNummer'
if (MESSAGE_GetDataOutputParameters != null) {
    SubProcessMetaData.AHVNummer = MESSAGE_GetDataOutputParameters.AHVNummer;
} else {
    SubProcessMetaData.AHVNummer = null;
}

// Map from 'GetDataOutputParameters.caseID' to 'SubProcessMetaData.WFCaseID'
if (MESSAGE_GetDataOutputParameters != null) {
    SubProcessMetaData.WFCaseID = MESSAGE_GetDataOutputParameters.caseID;
} else {
    SubProcessMetaData.WFCaseID = null;
}

// Map from 'GetDataOutputParameters.dokumentenArt' to 'SubProcessMetaData.dokumentenArt'
if (MESSAGE_GetDataOutputParameters != null) {
    SubProcessMetaData.dokumentenArt = MESSAGE_GetDataOutputParameters.dokumentenArt;
} else {
    SubProcessMetaData.dokumentenArt = null;
}

// Map from 'GetDataOutputParameters.kanton' to 'SubProcessMetaData.kanton'
if (MESSAGE_GetDataOutputParameters != null) {
    SubProcessMetaData.kanton = MESSAGE_GetDataOutputParameters.kanton;
} else {
    SubProcessMetaData.kanton = null;
}

// Map from 'GetDataOutputParameters.partnerID' to 'SubProcessMetaData.partnerID'
if (MESSAGE_GetDataOutputParameters != null) {
    SubProcessMetaData.partnerID = MESSAGE_GetDataOutputParameters.partnerID;
} else {
    SubProcessMetaData.partnerID = null;
}

// Map from 'GetDataOutputParameters.caseID' to 'WfCaseID'
if (MESSAGE_GetDataOutputParameters != null) {
    WfCaseID = MESSAGE_GetDataOutputParameters.caseID;
} else {
    WfCaseID = null;
}


]]></tibex:script>
                            </tibex:extActivity>
                        </bpws:extensionActivity>
                    </bpws:sequence>
                </bpws:scope>
            </bpws:sequence>
        </bpws:scope>
    </bpws:flow>
</bpws:process>
