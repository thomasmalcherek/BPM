<?xml version="1.0" encoding="UTF-8"?>
<bpws:process exitOnStandardFault="no" name="Thomas_WFProcess"
    suppressJoinFailure="yes" tibex:bxVersion="1.15.0"
    tibex:explicitCompensation="yes"
    tibex:xpdlId="_KbawcLqHEeiASc0c7PuHLA"
    xmlns:bpws="http://docs.oasis-open.org/wsbpel/2.0/process/executable"
    xmlns:jms="http://www.tibco.com/namespaces/ws/2004/soap/binding/JMS"
    xmlns:ns="http://www.tibco.com/bwse/simpleaddresslookup"
    xmlns:ns0="http://www.tibco.com/bwse/simpleaddresslookup"
    xmlns:ns1="http://xmlns.example.com/1222666263328"
    xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/"
    xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/"
    xmlns:tibex="http://www.tibco.com/bpel/2007/extensions"
    xmlns:tns="http://www.tibco.com/bwse/simpleaddresslookup"
    xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <tibex:VariableDescriptor type="PersistentBatching">
        <task name="_BX_assign">
            <startingVariables>
                <variable>Data</variable>
            </startingVariables>
        </task>
        <task name="_BX_SPInput_Thomas_WF_APPROVAL_CEO">
            <startingVariables>
                <variable>Data</variable>
            </startingVariables>
        </task>
        <task name="UserTask2">
            <startingVariables>
                <variable>Data</variable>
            </startingVariables>
        </task>
        <task name="UserTask">
            <startingVariables>
                <variable>Data</variable>
            </startingVariables>
        </task>
        <task name="_BX_SPInput_Approval">
            <startingVariables>
                <variable>Data</variable>
            </startingVariables>
        </task>
    </tibex:VariableDescriptor>
    <bpws:documentation>*** Generated by TIBCO Business Studio.</bpws:documentation>
    <bpws:import importType="http://schemas.xmlsoap.org/wsdl/"
        location="bpm_callService.wsdl" namespace="http://www.tibco.com/bwse/simpleaddresslookup"/>
    <bpws:partnerLinks>
        <bpws:partnerLink
            name="SimpleAddressLookupPortTypeSOAP_Consumer"
            partnerLinkType="ns0:SimpleAddressLookupPortType_PLT" partnerRole="SimpleAddressLookupPortTypeProvider"/>
    </bpws:partnerLinks>
    <bpws:variables>
        <bpws:variable name="Data"
            tibex:class="com.example.thomas_bd.WF_PACK.WF_DATA" tibex:xpdlId="_ex_LgbqIEeiASc0c7PuHLA"/>
    </bpws:variables>
    <bpws:extensions>
        <bpws:extension mustUnderstand="yes" namespace="http://www.tibco.com/bpel/2007/extensions"/>
    </bpws:extensions>
    <bpws:eventHandlers/>
    <bpws:flow name="_BX_flow_vAR88OgYEeiy37IVL5U50w">
        <bpws:links>
            <bpws:link name="Thomas_WF_APPROVAL_CEO to EndEvent" tibex:xpdlId="_a7UwEM4dEeiDiYkGgGX96A"/>
            <bpws:link name="StartEvent to UserTask" tibex:xpdlId="_R3e5YLqHEeiASc0c7PuHLA"/>
            <bpws:link name="UserTask to Approval" tibex:xpdlId="_yyIgELqIEeiASc0c7PuHLA"/>
            <bpws:link name="UserTask to Thomas_WF_APPROVAL_CEO" tibex:xpdlId="_9iBp4LqLEeiASc0c7PuHLA"/>
            <bpws:link name="UserTask2 to EndEvent" tibex:xpdlId="_0FvxEL3KEeiAgpInLJUeaw"/>
            <bpws:link name="ServiceTask to UserTask2" tibex:xpdlId="_VtziU84dEeiDiYkGgGX96A"/>
            <bpws:link name="Approval to ServiceTask" tibex:xpdlId="_r0jGwcWoEeiIn_6o0S1HsA"/>
        </bpws:links>
        <bpws:extensionActivity>
            <tibex:receiveEvent createInstance="yes" eventTimeout="0"
                name="StartEvent" tibex:type="startEvent"
                tibex:xpdlId="_QiO9srqHEeiASc0c7PuHLA" xmlns:tibex="http://www.tibco.com/bpel/2007/extensions">
                <bpws:sources>
                    <bpws:source linkName="StartEvent to UserTask"/>
                </bpws:sources>
                <tibex:eventSource>
                    <tibex:startEvent eventType="Default"/>
                </tibex:eventSource>
            </tibex:receiveEvent>
        </bpws:extensionActivity>
        <bpws:empty name="EndEvent" tibex:migrationAllowed="yes"
            tibex:type="endEvent" tibex:xpdlId="_QiO9s7qHEeiASc0c7PuHLA">
            <bpws:targets>
                <bpws:target linkName="Thomas_WF_APPROVAL_CEO to EndEvent"/>
                <bpws:target linkName="UserTask2 to EndEvent"/>
            </bpws:targets>
        </bpws:empty>
        <bpws:extensionActivity>
            <tibex:extActivity name="UserTask"
                tibex:migrationAllowed="yes" tibex:type="userTask"
                tibex:xpdlId="_R3eSULqHEeiASc0c7PuHLA" xmlns:tibex="http://www.tibco.com/bpel/2007/extensions">
                <bpws:targets>
                    <bpws:target linkName="StartEvent to UserTask"/>
                </bpws:targets>
                <bpws:sources>
                    <bpws:source linkName="UserTask to Approval">
                        <bpws:transitionCondition expressionLanguage="urn:tibco:wsbpel:2.0:sublang:javascript"><![CDATA[##otherwise##]]></bpws:transitionCondition>
                    </bpws:source>
                    <bpws:source linkName="UserTask to Thomas_WF_APPROVAL_CEO">
                        <bpws:transitionCondition expressionLanguage="urn:tibco:wsbpel:2.0:sublang:javascript"><![CDATA[Data.VALUE>2000]]></bpws:transitionCondition>
                    </bpws:source>
                </bpws:sources>
                <model:UserTaskDataModelType
                    distributionStrategy="OFFER" userTaskPriority="50"
                    workModelID="WM__R3eSULqHEeiASc0c7PuHLA"
                    workModelVersionRange="[1.0.0.qualifier,1.0.0.qualifier]"
                    xmi:version="2.0"
                    xmlns:model="http://model.ut.n2.tibco.com" xmlns:xmi="http://www.omg.org/XMI">
                    <userTaskParticipants>
                        <userTaskParticipant entity="ROLE"
                            modelVersion="1" uniqueId="_-wNjALqFEeiASc0c7PuHLA"/>
                    </userTaskParticipants>
                    <userTaskParameters>
                        <userTaskParameter mandatory="false"
                            mode="INOUT" name="Data"/>
                    </userTaskParameters>
                    <userTaskGroupMemberships/>
                </model:UserTaskDataModelType>
            </tibex:extActivity>
        </bpws:extensionActivity>
        <bpws:scope name="Approval" tibex:migrationAllowed="yes"
            tibex:type="reusableSubProcess" tibex:xpdlId="_yyH5ALqIEeiASc0c7PuHLA">
            <bpws:targets>
                <bpws:target linkName="UserTask to Approval"/>
            </bpws:targets>
            <bpws:sources>
                <bpws:source linkName="Approval to ServiceTask"/>
            </bpws:sources>
            <bpws:variables>
                <bpws:variable name="_BX_PARA_IN" tibex:class="com.example.thomas_bd.WF_PACK.WF_DATA"/>
            </bpws:variables>
            <bpws:sequence name="_BX_sequence">
                <bpws:extensionActivity>
                    <tibex:extActivity name="_BX_SPInput_Approval" xmlns:tibex="http://www.tibco.com/bpel/2007/extensions">
                        <tibex:script expressionLanguage="urn:tibco:wsbpel:2.0:sublang:javascript"><![CDATA[// Create target 'PARA_IN' if it doesn't exist.
if (_BX_PARA_IN == null) {
    _BX_PARA_IN = com_example_thomas_bd_WF_PACK_Factory.createWF_DATA();
}

// Map from 'Data.DATE' to 'PARA_IN.DATE'
if (Data != null) {
    _BX_PARA_IN.DATE = Data.DATE;
} else {
    _BX_PARA_IN.DATE = null;
}

// Map from 'Data.EXPLANATION' to 'PARA_IN.EXPLANATION'
if (Data != null) {
    _BX_PARA_IN.EXPLANATION = Data.EXPLANATION;
} else {
    _BX_PARA_IN.EXPLANATION = null;
}

// Map from 'Data.HEADER' to 'PARA_IN.HEADER'
if (Data != null) {
    _BX_PARA_IN.HEADER = Data.HEADER;
} else {
    _BX_PARA_IN.HEADER = null;
}

// Map from 'Data.POSTALCODE' to 'PARA_IN.POSTALCODE'
if (Data != null) {
    _BX_PARA_IN.POSTALCODE = Data.POSTALCODE;
} else {
    _BX_PARA_IN.POSTALCODE = null;
}

// Map from 'Data.VALUE' to 'PARA_IN.VALUE'
if (Data != null) {
    _BX_PARA_IN.VALUE = Data.VALUE;
} else {
    _BX_PARA_IN.VALUE = null;
}


]]></tibex:script>
                    </tibex:extActivity>
                </bpws:extensionActivity>
                <bpws:extensionActivity>
                    <tibex:extActivity name="Approval" xmlns:tibex="http://www.tibco.com/bpel/2007/extensions">
                        <tibex:callProcess followParentLifecycle="yes"
                            priority="inline" subProcessId="_Gm284LqLEeiASc0c7PuHLA">
                            <tibex:subProcessInput>
                                <tibex:mapping field="_BX_PARA_IN" formalParameter="PARA_IN"/>
                            </tibex:subProcessInput>
                        </tibex:callProcess>
                    </tibex:extActivity>
                </bpws:extensionActivity>
            </bpws:sequence>
        </bpws:scope>
        <bpws:scope name="Thomas_WF_APPROVAL_CEO"
            tibex:migrationAllowed="yes" tibex:type="reusableSubProcess" tibex:xpdlId="_7hO20bqLEeiASc0c7PuHLA">
            <bpws:targets>
                <bpws:target linkName="UserTask to Thomas_WF_APPROVAL_CEO"/>
            </bpws:targets>
            <bpws:sources>
                <bpws:source linkName="Thomas_WF_APPROVAL_CEO to EndEvent"/>
            </bpws:sources>
            <bpws:variables>
                <bpws:variable name="_BX_PARA_IN" tibex:class="com.example.thomas_bd.WF_PACK.WF_DATA"/>
            </bpws:variables>
            <bpws:sequence name="_BX_sequence_2">
                <bpws:extensionActivity>
                    <tibex:extActivity
                        name="_BX_SPInput_Thomas_WF_APPROVAL_CEO" xmlns:tibex="http://www.tibco.com/bpel/2007/extensions">
                        <tibex:script expressionLanguage="urn:tibco:wsbpel:2.0:sublang:javascript"><![CDATA[// Create target 'PARA_IN' if it doesn't exist.
if (_BX_PARA_IN == null) {
    _BX_PARA_IN = com_example_thomas_bd_WF_PACK_Factory.createWF_DATA();
}

// Map from 'Data.DATE' to 'PARA_IN.DATE'
if (Data != null) {
    _BX_PARA_IN.DATE = Data.DATE;
} else {
    _BX_PARA_IN.DATE = null;
}

// Map from 'Data.EXPLANATION' to 'PARA_IN.EXPLANATION'
if (Data != null) {
    _BX_PARA_IN.EXPLANATION = Data.EXPLANATION;
} else {
    _BX_PARA_IN.EXPLANATION = null;
}

// Map from 'Data.HEADER' to 'PARA_IN.HEADER'
if (Data != null) {
    _BX_PARA_IN.HEADER = Data.HEADER;
} else {
    _BX_PARA_IN.HEADER = null;
}

// Map from 'Data.POSTALCODE' to 'PARA_IN.POSTALCODE'
if (Data != null) {
    _BX_PARA_IN.POSTALCODE = Data.POSTALCODE;
} else {
    _BX_PARA_IN.POSTALCODE = null;
}

// Map from 'Data.VALUE' to 'PARA_IN.VALUE'
if (Data != null) {
    _BX_PARA_IN.VALUE = Data.VALUE;
} else {
    _BX_PARA_IN.VALUE = null;
}


]]></tibex:script>
                    </tibex:extActivity>
                </bpws:extensionActivity>
                <bpws:extensionActivity>
                    <tibex:extActivity name="Thomas_WF_APPROVAL_CEO" xmlns:tibex="http://www.tibco.com/bpel/2007/extensions">
                        <tibex:callProcess followParentLifecycle="yes"
                            priority="inline" subProcessId="_4U4PkLqLEeiASc0c7PuHLA">
                            <tibex:subProcessInput>
                                <tibex:mapping field="_BX_PARA_IN" formalParameter="PARA_IN"/>
                            </tibex:subProcessInput>
                        </tibex:callProcess>
                    </tibex:extActivity>
                </bpws:extensionActivity>
            </bpws:sequence>
        </bpws:scope>
        <bpws:scope name="ServiceTask" tibex:migrationAllowed="yes"
            tibex:type="serviceTask" tibex:xpdlId="_r0jGwMWoEeiIn_6o0S1HsA">
            <bpws:targets>
                <bpws:target linkName="Approval to ServiceTask"/>
            </bpws:targets>
            <bpws:sources>
                <bpws:source linkName="ServiceTask to UserTask2"/>
            </bpws:sources>
            <bpws:variables>
                <bpws:variable messageType="ns0:RequestMessage" name="v_8e8f4298"/>
                <bpws:variable messageType="ns0:ResponseMessage" name="v_20cd2066"/>
            </bpws:variables>
            <bpws:sequence name="_BX_sequence_3">
                <bpws:assign name="_BX_assign" validate="no">
                    <bpws:copy tibex:tempVariable="MESSAGE_requestMessage">
                        <bpws:from expressionLanguage="urn:tibco:wsbpel:2.0:sublang:javascript"><![CDATA[com_tibco_bwse_simpleaddresslookup_Factory.createInputType();]]></bpws:from>
                        <bpws:to variable="MESSAGE_requestMessage"/>
                    </bpws:copy>
                    <bpws:copy>
                        <bpws:from
                            expressionLanguage="urn:tibco:wsbpel:2.0:sublang:javascript" tibex:returnVar="fromReturn"><![CDATA[Data.POSTALCODE]]></bpws:from>
                        <bpws:to expressionLanguage="urn:tibco:wsbpel:2.0:sublang:javascript"><![CDATA[if (MESSAGE_requestMessage == null) MESSAGE_requestMessage = com_tibco_bwse_simpleaddresslookup_Factory.createInputType();
MESSAGE_requestMessage.postalCode = fromReturn;]]></bpws:to>
                    </bpws:copy>
                    <bpws:copy ignoreMissingFromData="yes"
                        tibex:elementName="{http://www.tibco.com/bwse/simpleaddresslookup}Input"
                        tibex:objectNamespace="http://www.tibco.com/bwse/simpleaddresslookup" tibex:transform="ObjectToXml">
                        <bpws:from variable="MESSAGE_requestMessage"/>
                        <bpws:to part="requestMessage" variable="v_8e8f4298"/>
                    </bpws:copy>
                </bpws:assign>
                <bpws:invoke inputVariable="v_8e8f4298"
                    name="_BX_invoke"
                    operation="SimpleAddressLookup-Operation"
                    outputVariable="v_20cd2066"
                    partnerLink="SimpleAddressLookupPortTypeSOAP_Consumer" portType="ns0:SimpleAddressLookupPortType"/>
                <bpws:assign name="_BX_assign_2" validate="no">
                    <bpws:copy
                        tibex:objectNamespace="http://www.tibco.com/bwse/simpleaddresslookup"
                        tibex:tempVariable="MESSAGE_responseMessage" tibex:transform="XmlToObject">
                        <bpws:from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0"><![CDATA[$v_20cd2066.responseMessage]]></bpws:from>
                        <bpws:to variable="MESSAGE_responseMessage"/>
                    </bpws:copy>
                    <bpws:copy>
                        <bpws:from
                            expressionLanguage="urn:tibco:wsbpel:2.0:sublang:javascript" tibex:returnVar="fromReturn"><![CDATA[MESSAGE_responseMessage.country]]></bpws:from>
                        <bpws:to expressionLanguage="urn:tibco:wsbpel:2.0:sublang:javascript"><![CDATA[if (Data == null) Data = com_example_thomas_bd_WF_PACK_Factory.createWF_DATA();
Data.VALUE = fromReturn;]]></bpws:to>
                    </bpws:copy>
                    <bpws:copy>
                        <bpws:from
                            expressionLanguage="urn:tibco:wsbpel:2.0:sublang:javascript" tibex:returnVar="fromReturn"><![CDATA[MESSAGE_responseMessage.postalCode]]></bpws:from>
                        <bpws:to expressionLanguage="urn:tibco:wsbpel:2.0:sublang:javascript"><![CDATA[if (Data == null) Data = com_example_thomas_bd_WF_PACK_Factory.createWF_DATA();
Data.POSTALCODE = fromReturn;]]></bpws:to>
                    </bpws:copy>
                    <bpws:copy>
                        <bpws:from
                            expressionLanguage="urn:tibco:wsbpel:2.0:sublang:javascript" tibex:returnVar="fromReturn"><![CDATA[MESSAGE_responseMessage.province]]></bpws:from>
                        <bpws:to expressionLanguage="urn:tibco:wsbpel:2.0:sublang:javascript"><![CDATA[if (Data == null) Data = com_example_thomas_bd_WF_PACK_Factory.createWF_DATA();
Data.HEADER = fromReturn;]]></bpws:to>
                    </bpws:copy>
                    <bpws:copy>
                        <bpws:from
                            expressionLanguage="urn:tibco:wsbpel:2.0:sublang:javascript" tibex:returnVar="fromReturn"><![CDATA[MESSAGE_responseMessage.city]]></bpws:from>
                        <bpws:to expressionLanguage="urn:tibco:wsbpel:2.0:sublang:javascript"><![CDATA[if (Data == null) Data = com_example_thomas_bd_WF_PACK_Factory.createWF_DATA();
Data.EXPLANATION = fromReturn;]]></bpws:to>
                    </bpws:copy>
                </bpws:assign>
            </bpws:sequence>
        </bpws:scope>
        <bpws:extensionActivity>
            <tibex:extActivity name="UserTask2"
                tibex:migrationAllowed="yes" tibex:type="userTask"
                tibex:xpdlId="_VtziUM4dEeiDiYkGgGX96A" xmlns:tibex="http://www.tibco.com/bpel/2007/extensions">
                <bpws:targets>
                    <bpws:target linkName="ServiceTask to UserTask2"/>
                </bpws:targets>
                <bpws:sources>
                    <bpws:source linkName="UserTask2 to EndEvent"/>
                </bpws:sources>
                <model:UserTaskDataModelType
                    distributionStrategy="OFFER" userTaskPriority="50"
                    workModelID="WM__VtziUM4dEeiDiYkGgGX96A"
                    workModelVersionRange="[1.0.0.qualifier,1.0.0.qualifier]"
                    xmi:version="2.0"
                    xmlns:model="http://model.ut.n2.tibco.com" xmlns:xmi="http://www.omg.org/XMI">
                    <userTaskParticipants>
                        <userTaskParticipant entity="ROLE"
                            modelVersion="1" uniqueId="_-wNjALqFEeiASc0c7PuHLA"/>
                    </userTaskParticipants>
                    <userTaskParameters>
                        <userTaskParameter mandatory="false"
                            mode="INOUT" name="Data"/>
                    </userTaskParameters>
                    <userTaskGroupMemberships/>
                </model:UserTaskDataModelType>
            </tibex:extActivity>
        </bpws:extensionActivity>
    </bpws:flow>
</bpws:process>
